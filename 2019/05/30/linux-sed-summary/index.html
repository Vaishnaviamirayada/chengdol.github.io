<!DOCTYPE html>












  


<html class="theme-next muse use-motion" lang="">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">


























<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=6.7.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.7.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.7.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.7.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.7.0" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '6.7.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":true,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="Normally we use a interactive text editor, like vim. The command sed is one of the most commonly used command line editor in Linux world. sed stands for the stream editor, it uses the roles supplied t">
<meta name="keywords" content="linux,sed">
<meta property="og:type" content="article">
<meta property="og:title" content="sed Command Daily Work Summary">
<meta property="og:url" content="http://yoursite.com/2019/05/30/linux-sed-summary/index.html">
<meta property="og:site_name" content="海胆阶段&#39;s Blog">
<meta property="og:description" content="Normally we use a interactive text editor, like vim. The command sed is one of the most commonly used command line editor in Linux world. sed stands for the stream editor, it uses the roles supplied t">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2019-08-23T06:25:13.236Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="sed Command Daily Work Summary">
<meta name="twitter:description" content="Normally we use a interactive text editor, like vim. The command sed is one of the most commonly used command line editor in Linux world. sed stands for the stream editor, it uses the roles supplied t">






  <link rel="canonical" href="http://yoursite.com/2019/05/30/linux-sed-summary/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>sed Command Daily Work Summary | 海胆阶段's Blog</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">海胆阶段's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    
      
    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>Home</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
    
      
    

    
      
    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>About</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    
      
    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>Tags<span class="badge">62</span></a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    
      
    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>Categories<span class="badge">17</span></a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    
      
    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>Archives<span class="badge">106</span></a>

  </li>

      
      
    </ul>
  

  
    

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/30/linux-sed-summary/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="海胆阶段">
      <meta itemprop="description" content="骐骥一跃，不能十步；驽马十驾，功在不舍">
      <meta itemprop="image" content="/images/cuishao.png">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="海胆阶段's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">sed Command Daily Work Summary

              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-05-30 17:23:37" itemprop="dateCreated datePublished" datetime="2019-05-30T17:23:37-07:00">2019-05-30</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-08-22 23:25:13" itemprop="dateModified" datetime="2019-08-22T23:25:13-07:00">2019-08-22</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>Normally we use a interactive text editor, like <code>vim</code>. The command <code>sed</code> is one of the most commonly used <code>command line editor</code> in Linux world. <code>sed</code> stands for the <code>stream editor</code>, it uses the roles supplied to edit a stream of data on the fly.</p>
<p>First you need to understand how <code>sed</code> process the text:</p>
<ol>
<li>Reads <strong>one</strong> data line at a time from the input</li>
<li>Matches that data with the supplied editor commands</li>
<li>Changes data in the stream as specified in the commands</li>
<li>Outputs the new data to STDOUT</li>
</ol>
<h2 id="Substitution"><a href="#Substitution" class="headerlink" title="Substitution"></a>Substitution</h2><p>I have a text file <code>sedtxt</code>:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Using Java print hello world and hello tree.</span><br><span class="line">Using Java print hello world and hello tree.</span><br><span class="line">Using Java print hello world and hello tree.</span><br><span class="line">Using Java print hello world and hello tree.</span><br></pre></td></tr></table></figure></p>
<p>If I want to substite all <code>hello</code> with <code>hi</code> in-place:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -i -e &apos;s/hello/hi/g&apos; sedtxt</span><br></pre></td></tr></table></figure></p>
<p><code>-i</code>: does in-place substitution in file <code>sedtxt</code><br><code>-e</code>: followed by commands<br><code>s/x/y/flags</code>: substitute option, <code>/</code> is the delimiter, can be other signs; <code>g</code> represents that replace in all occurrences.</p>
<blockquote>
<p>Note that if not set <code>g</code>, it will only replace first occurrence in <strong>each</strong> line!<br>Note that <code>sed</code> can get input from STDIN or from pipe</p>
</blockquote>
<p>For the demo, I remove the <code>-i</code> option, if I want to substitute the second <code>hello</code> with <code>goodbye</code> in-place in each line:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -e &apos;s/hello/goodbye/2&apos; sedtxt</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Using Java print hello world and goodbye tree.</span><br><span class="line">Using Java print hello world and goodbye tree.</span><br><span class="line">Using Java print hello world and goodbye tree.</span><br><span class="line">Using Java print hello world and goodbye tree.</span><br></pre></td></tr></table></figure>
<p>If I want to substitute <code>hello</code> with <code>hi</code> and <code>Java</code> with <code>Python</code>:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sed -e &apos;s/hello/hi/g&apos; -e &apos;s/Java/Pyhton/g&apos; sedtxt</span><br><span class="line">sed -e &apos;s/hello/hi/g; s/Java/Python/g&apos; sedtxt</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Using Pyhton print hi world and hi tree.</span><br><span class="line">Using Pyhton print hi world and hi tree.</span><br><span class="line">Using Pyhton print hi world and hi tree.</span><br><span class="line">Using Pyhton print hi world and hi tree.</span><br></pre></td></tr></table></figure>
<p>If I want to print only the matching lines, convenient for debugging:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -n -e &apos;s/hello/hi/gp&apos; sedtxt</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Using Java print hi world and hi tree.</span><br><span class="line">Using Java print hi world and hi tree.</span><br><span class="line">Using Java print hi world and hi tree.</span><br><span class="line">Using Java print hi world and hi tree.</span><br></pre></td></tr></table></figure>
<p><code>-n</code>: quiet output<br><code>p</code>: substitute flag to print matching line</p>
<blockquote>
<p>Note, combine with <code>grep</code> to debug is good</p>
</blockquote>
<h3 id="Using-Address"><a href="#Using-Address" class="headerlink" title="Using Address"></a>Using Address</h3><p>The <code>sed</code> editor assigns the first line in the text stream as line number 1 and continues sequentially for each new line.</p>
<p>only replace 2rd line:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -e &apos;2s/hello/hi/g&apos; sedtxt</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Using Java print hello world and hello tree.</span><br><span class="line">Using Java print hi world and hi tree.</span><br><span class="line">Using Java print hello world and hello tree.</span><br><span class="line">Using Java print hello world and hello tree.</span><br></pre></td></tr></table></figure>
<p>range substitution, <code>&#39;1,$s/hello/hi/g&#39;</code> means from top to bottom.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -e &apos;2,3s/hello/hi/g&apos; sedtxt</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Using Java print hello world and hello tree.</span><br><span class="line">Using Java print hi world and hi tree.</span><br><span class="line">Using Java print hi world and hi tree.</span><br><span class="line">Using Java print hello world and hello tree.</span><br></pre></td></tr></table></figure>
<p>can also use text pattern to filter lines, this will apply one line contains <code>print</code> word.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -e &apos;/print/s#and#or#&apos; sedtxt</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Using Java print hello world or hello tree.</span><br><span class="line">Using Java print hello world or hello tree.</span><br><span class="line">Using Java print hello world or hello tree.</span><br><span class="line">Using Java print hello world or hello tree.</span><br></pre></td></tr></table></figure>
<h2 id="Deletion"><a href="#Deletion" class="headerlink" title="Deletion"></a>Deletion</h2><p>I have a text file <code>seddel</code>:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">The 1st line is 1</span><br><span class="line">The 2rd line is 2</span><br><span class="line">The 3rd line is 3</span><br><span class="line">The 4th line is 4</span><br></pre></td></tr></table></figure></p>
<p>Delete line 2 to end:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -e &apos;2,$d&apos; seddel</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">The 1st line is 1</span><br></pre></td></tr></table></figure>
<p>can also use pattern matching, delete <code>3rd</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -e &apos;/3rd/d&apos; seddel</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">The 1st line is 1</span><br><span class="line">The 2rd line is 2</span><br><span class="line">The 4th line is 4</span><br></pre></td></tr></table></figure>
<p>You can combine 2 address syntax, this will start from first line and until match <code>3rd</code>, replace <code>3rd</code> in the range with <code>NAN</code>:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -e &apos;1,/3rd/&#123;s/3rd/NAN/g&#125;&apos; seddel</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">The 1st line is 1</span><br><span class="line">The 2rd line is 2</span><br><span class="line">The NAN line is 3</span><br><span class="line">The 4th line is 4</span><br></pre></td></tr></table></figure>
<h2 id="Insertion-and-Appending"><a href="#Insertion-and-Appending" class="headerlink" title="Insertion and Appending"></a>Insertion and Appending</h2><p>The insert command (<code>i</code>) adds a new line <strong>before</strong> the specified line.<br>The append command (<code>a</code>) adds a new line <strong>after</strong> the specified line.</p>
<p>I have a text file <code>sedins</code>:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">The 1st line is 1</span><br><span class="line">The 2rd line is 2</span><br><span class="line">The 3rd line is 3</span><br><span class="line">The 4th line is 4</span><br></pre></td></tr></table></figure></p>
<p>Insert at first line:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -e &apos;1iNew line coming!&apos; sedins</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">New line coming!</span><br><span class="line">The 1st line is 1</span><br><span class="line">The 2rd line is 2</span><br><span class="line">The 3rd line is 3</span><br><span class="line">The 4th line is 4</span><br></pre></td></tr></table></figure>
<p>Append at 3rd line:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -e &apos;2aNew line coming!&apos; sedins</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">The 1st line is 1</span><br><span class="line">The 2rd line is 2</span><br><span class="line">New line coming!</span><br><span class="line">The 3rd line is 3</span><br><span class="line">The 4th line is 4</span><br></pre></td></tr></table></figure>
<h3 id="Insert-with-white-spaces"><a href="#Insert-with-white-spaces" class="headerlink" title="Insert with white spaces"></a>Insert with white spaces</h3><p>For example, When developing non-root, I want to add <code>runAsUser: 1000</code> right after <code>securityContext:</code> with correct alignment:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -i -e &apos;/securityContext/a\         runAsUser: 1000&apos; xxx.yml</span><br></pre></td></tr></table></figure></p>
<p>Only to escape the first space. <code>sed</code> can automatically recognize the rest of the spaces.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">       securityContext:</span><br><span class="line">         runAsUser: 1000</span><br><span class="line">         privileged: false</span><br><span class="line">...</span><br></pre></td></tr></table></figure></p>
<h2 id="Changing"><a href="#Changing" class="headerlink" title="Changing"></a>Changing</h2><p>The change command allows you to change the contents of an entire line of text in the data stream.</p>
<p>I have a text file <code>sedch</code>:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">The 1st line is 1</span><br><span class="line">The 2rd line is 2</span><br><span class="line">The 3rd line is 3</span><br><span class="line">The 4th line is 4</span><br></pre></td></tr></table></figure></p>
<p>change the second line:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sed -e &apos;2cNONE&apos; sedch</span><br><span class="line">## or</span><br><span class="line">sed -e &apos;/2rd/cNONE&apos; sedch</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">The 1st line is 1</span><br><span class="line">NONE</span><br><span class="line">The 3rd line is 3</span><br><span class="line">The 4th line is 4</span><br></pre></td></tr></table></figure>
<h2 id="Transforming-chars"><a href="#Transforming-chars" class="headerlink" title="Transforming chars"></a>Transforming chars</h2><p>The transform command (<code>y</code>) is the only sed editor command that operates on a single character. </p>
<p>I have a text file <code>sedtrans</code>:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">The 1st line is 1</span><br><span class="line">The 2rd line is 2</span><br><span class="line">The 3rd line is 3</span><br><span class="line">The 4th line is 4</span><br></pre></td></tr></table></figure></p>
<p>The transform command performs a one-to-one mapping of the inchars and the outchars values.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -e &apos;y/1234/5678/&apos; sedtrans</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">The 5st line is 5</span><br><span class="line">The 6rd line is 6</span><br><span class="line">The 7rd line is 7</span><br><span class="line">The 8th line is 8</span><br></pre></td></tr></table></figure>
<p>The transform command is a <strong>global</strong> command; that is, it performs the transformation on any character found in the text line automatically, without regard to the occurrence.<br>You can’t limit the transformation to a specific occurrence of the character.</p>
<h2 id="sed-files-in-directory-and-subdirectories-recursively"><a href="#sed-files-in-directory-and-subdirectories-recursively" class="headerlink" title="sed files in directory and subdirectories recursively"></a>sed files in directory and subdirectories recursively</h2><p>Actually we can find all files by <code>find</code> then exec <code>sed</code>, see this <a href="https://stackoverflow.com/questions/6758963/find-and-replace-with-sed-in-directory-and-sub-directories" target="_blank" rel="noopener">post</a>:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find &lt;dir&gt; -type f -name &quot;*sh&quot; -exec sed -i -e &quot;s|$&#123;old&#125;|$&#123;new&#125;|g&quot; &#123;&#125; \;</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>Note that <code>-type f</code> is necessary, otherwise will pass directory name to <code>sed</code>.</p>
</blockquote>

      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/linux/" rel="tag"># linux</a>
          
            <a href="/tags/sed/" rel="tag"># sed</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/05/29/shell-sync-process/" rel="next" title="Processes Synchronization">
                <i class="fa fa-chevron-left"></i> Processes Synchronization
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/06/02/shell-variables/" rel="prev" title="Variables in Shell">
                Variables in Shell <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/cuishao.png" alt="海胆阶段">
            
              <p class="site-author-name" itemprop="name">海胆阶段</p>
              <p class="site-description motion-element" itemprop="description">骐骥一跃，不能十步；驽马十驾，功在不舍</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">106</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">17</span>
                    <span class="site-state-item-name">categories</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">62</span>
                    <span class="site-state-item-name">tags</span>
                  </a>
                </div>
              
            </nav>
          

          

          

          

          
          

          
            
          
          

        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Substitution"><span class="nav-number">1.</span> <span class="nav-text">Substitution</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Using-Address"><span class="nav-number">1.1.</span> <span class="nav-text">Using Address</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Deletion"><span class="nav-number">2.</span> <span class="nav-text">Deletion</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Insertion-and-Appending"><span class="nav-number">3.</span> <span class="nav-text">Insertion and Appending</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Insert-with-white-spaces"><span class="nav-number">3.1.</span> <span class="nav-text">Insert with white spaces</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Changing"><span class="nav-number">4.</span> <span class="nav-text">Changing</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Transforming-chars"><span class="nav-number">5.</span> <span class="nav-text">Transforming chars</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#sed-files-in-directory-and-subdirectories-recursively"><span class="nav-number">6.</span> <span class="nav-text">sed files in directory and subdirectories recursively</span></a></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Chengdong Liao</span>

  

  
</div>


  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> v6.7.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/src/utils.js?v=6.7.0"></script>

  <script src="/js/src/motion.js?v=6.7.0"></script>



  
  

  
  <script src="/js/src/scrollspy.js?v=6.7.0"></script>
<script src="/js/src/post-details.js?v=6.7.0"></script>



  


  <script src="/js/src/bootstrap.js?v=6.7.0"></script>



  



  











  





  

  

  

  

  

  

  

  

  

  

  

  
  <style>
    .copy-btn {
      display: inline-block;
      padding: 6px 12px;
      font-size: 13px;
      font-weight: 700;
      line-height: 20px;
      color: #333;
      white-space: nowrap;
      vertical-align: middle;
      cursor: pointer;
      background-color: #eee;
      background-image: linear-gradient(#fcfcfc, #eee);
      border: 1px solid #d5d5d5;
      border-radius: 3px;
      user-select: none;
      outline: 0;
    }

    .highlight-wrap .copy-btn {
      transition: opacity .3s ease-in-out;
      opacity: 0;
      padding: 2px 6px;
      position: absolute;
      right: 4px;
      top: 8px;
    }

    .highlight-wrap:hover .copy-btn,
    .highlight-wrap .copy-btn:focus {
      opacity: 1
    }

    .highlight-wrap {
      position: relative;
    }
  </style>
  <script>
    $('.highlight').each(function (i, e) {
      var $wrap = $('<div>').addClass('highlight-wrap');
      $(e).after($wrap);
      $wrap.append($('<button>').addClass('copy-btn').append('Copy').on('click', function (e) {
        var code = $(this).parent().find('.code').find('.line').map(function (i, e) {
          return $(e).text();
        }).toArray().join('\n');
        var ta = document.createElement('textarea');
        var range = document.createRange(); //For Chrome
        var sel = window.getSelection(); //For Chrome
        var yPosition = window.pageYOffset || document.documentElement.scrollTop;
        ta.style.top = yPosition + 'px'; //Prevent page scroll
        ta.style.position = 'absolute';
        ta.style.opacity = '0';
        ta.value = code;
        ta.textContent = code; //For FireFox
        ta.contentEditable = true;
        ta.readOnly = false;
        document.body.appendChild(ta);
        range.selectNode(ta);
        sel.removeAllRanges();
        sel.addRange(range);
        ta.setSelectionRange(0, code.length);
        var result = document.execCommand('copy');
        
          if (result) $(this).text('Copied');
          else $(this).text('Copy failed');
        
        ta.blur(); //For iOS
        $(this).blur();
      })).on('mouseleave', function (e) {
        var $b = $(this).find('.copy-btn');
        setTimeout(function () {
          $b.text('Copy');
        }, 300);
      }).append(e);
    })
  </script>


  

</body>
</html>
